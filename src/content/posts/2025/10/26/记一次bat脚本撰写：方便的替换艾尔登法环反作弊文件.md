---
title: 记一次bat脚本撰写：方便的替换艾尔登法环反作弊文件
published: 2025-10-26
description: '记录了为了解决艾尔登法环（Elden Ring）频繁切换反作弊文件（小蓝熊）以实现作弊与联机功能切换的问题，撰写bat脚本的完整过程，以及过程中遇到的括号闭合陷阱。'
image: ''
tags: ["bat", "记录", "脚本开发", "艾尔登法环"]
category: '技术笔记'
draft: false 
lang: 'zh-CN'
---
## 起因

起初是因为在玩艾尔登法环的时候想从战士转成法师玩玩，这就需要修改属性。但是法环中修改玩家属性不是无限次的，此时我就想到要用**风灵月影**来修改玩家的属性。

因为启动**风灵月影**需要替换掉本体的小蓝熊，**所以**换成破解版的小蓝熊后法环就变成了离线模式，无法查看玩家的**留言**，这也就损失掉了游戏的一大乐趣。因此我就需要频繁替换游戏文件，作为懒人，**我当然要解决**这个问题，**所以**我**决定**写一个bat脚本来解决这个问题。



## 途中踩到的坑

在第一版的代码中，我一直不能成功执行替换文件的命令，但是改为 `echo "...."`就可以成功执行。

```bat
if "!type!"=="original" (
    echo 是否替换为【破解版反作弊】？(y/n)
	........
    )
```

### 原因

- **括号 `()` 的作用：** 在批处理脚本中，括号用于**命令块（Code Block）**。你的 `if` 和 `else if` 语句后面都跟了一个 `(...)` 块，意思是“如果条件为真，则执行括号里的 *所有* 命令”。
- 去掉引号后，  echo 是否替换为【破解版反作弊】？(y/n) 中的 `)` 提前闭合了 if 的 `(` ，导致程序结束从而无法执行后续的代码。

### 正确的做法

使用**转义字符 `^`** 来告诉解析器“这个括号不是语法，只是一个普通字符”：

```bat
echo 是否替换为【原版防护】？ ^（y/n^）
```

> *注意：转义全角括号 `（）` 的行为可能因系统环境而异，转义半角括号 `()` 是标准做法：`echo ... ^(y/n^)`。*

但显然，这远不如直接加双引号来得清晰明了。

